# Template: Argo CD repository credential for Octelium Helm chart (OCI on GHCR).
# GHCR often returns 403 for anonymous pulls; this secret lets Argo CD authenticate.
#
# 1. Create a GitHub PAT with read:packages (no other scopes needed for public packages).
# 2. Copy this file, replace the placeholders, apply (do NOT commit the filled secret).
#
#   cp repo-credentials-ghcr-octelium.template.yaml repo-credentials-ghcr-octelium.yaml
#   # Edit repo-credentials-ghcr-octelium.yaml: set username and password (PAT).
#   kubectl apply -f repo-credentials-ghcr-octelium.yaml
#
# 3. Sync the octelium-client Application again.
#
apiVersion: v1
kind: Secret
metadata:
  name: repo-ghcr-octelium-helm
  namespace: argocd
  labels:
    argocd.argoproj.io/secret-type: repository
stringData:
  type: helm
  enableOCI: "true"
  # Must match the registry path (no oci:// prefix). Application uses oci://ghcr.io/octelium/helm-charts.
  url: ghcr.io/octelium/helm-charts
  # GitHub username (or any non-empty string) and PAT with read:packages.
  username: YOUR_GITHUB_USERNAME
  password: YOUR_GITHUB_PAT_WITH_READ_PACKAGES
